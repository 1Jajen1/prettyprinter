<!-- This file was auto-generated by the 'readme' makefile target. -->



Prettyprinter à la Wadler/Leijen
================================

Master build: [![status](https://travis-ci.org/quchen/prettyprinter.svg?branch=master)](https://travis-ci.org/quchen/prettyprinter)

This module defines a prettyprinter to format text in a flexible and convenient
way. The idea is to combine a document out of many small components, then using
a layouter to convert it to an easily renderable simple document, which can then
be rendered to a variety of formats, for example plain `Text`, or Markdown.
*What you are reading right now was generated by this library (see
`GenerateReadme.hs`).*



Why another prettyprinter?
--------------------------

Haskell, more specifically Hackage, has a zoo of Wadler/Leijen based
prettyprinters already. Each of them addresses a different concern with the
classic `wl-pprint` package. This package solves *all* these issues, and then
some.



### `Text` instead of `String`

`String` has exactly one use, and that’s showing Hello World in tutorials. For
all other uses, Text is what people should be using. The prettyprinter uses no
`String` definitions anywhere; using a `String` means an immediate conversion to
the internal `Text`-based format.



### Extensive documentation

The library is stuffed with runnable examples, showing use cases for the vast
majority of exported values. Many things reference related definitions,
*everything* comes with at least a sentence explaining its purpose.



### No name clashes

Many prettyprinters use the legacy API of the first Wadler/Leijen prettyprinter,
which used e.g. `(<$>)` to separate lines, which clashes with the ubiquitous
synonym for `fmap` that’s been in Base for ages. These definitions were either
removed or renamed, so there are no name clashes with standard libraries
anymore.



### Annotation support

Text is not all letters and newlines. Often, we want to add more information,
the simplest kind being some form of styling. An ANSI terminal supports
colouring, a web browser a plethora of different formattings.

More complex uses of annotations include e.g. adding type annotations for
mouse-over hovers when printing a syntax tree, adding URLs to documentation, or
adding source locations to show where a certain piece of output comes from.

Special care has been applied to make annotations unobtrusive, so that if you
don’t need or care about them there is no overhead, neither in terms of
usability nor performance.



### Extensible backends

A document can be rendered in many different ways, for many different clients.
There is plain text, there is the ANSI terminal, there is the browser. Each of
these speak different languages, and the backend is responsible for the
translation to those languages. Backends should be readily available, or easy to
implement if a custom solution is desired.



### Performance

Rendering large documents should be done efficiently, and the library should
make it easy to optimize common use cases for the programmer.



### Open implementation

The type of documents is unanimously (!) abstract in the other Wadler/Leijen
prettyprinters, making it impossible to write adaptors from one library to
another. The type should be exposed for such purposes so it is possible to write
adaptors from library to library, or each of them is doomed to live on its own
small island of incompatibility. For this reason, the `Doc` type is fully
exposed in a semi-internal module for this specific use case.



The wl-pprint family
--------------------

The `wl-pprint` family of packages consists of:

  - `wl-pprint` is the core package. It defines the language to generate nicely
    laid out documents, which can then be given to renderers to display them in
    various ways, e.g. HTML, or plain text.
  - `wl-pprint-ansi` provides a renderer suitable for ANSI terminal output
    including colors (at the cost of a dependency more).
  - `wl-pprint-compat-old` provides a drop-in compatibility layer forprevious
    users of the old `wl-pprint`. Use it for easy adaption of the new
    `wl-pprint`, but don't develop anything new with it.
  - `wl-pprint-compat-old-ansi` is the same, but for previous users of
    `ansi-wl-pprint`.



Differences to the old Wadler/Leijen prettyprinter
--------------------------------------------------

The library originally started as a fork of `ansi-wl-pprint` until every line
had been touched. The result is still in the same spirit as its predecessors,
but modernized to match the current ecosystem and needs.

The most significant changes are:

  1. `(<$>)` is removed as an operator, since it clashes with the common alias
     for `fmap`.
  2. All but the essential `<>` and `<+>` operators were removed or replaced by
     ordinary names.
  3. Everything extensively documented, with references to other functions and
     runnable code examples.
  4. Use of `Text` instead of `String`.
  5. A `fuse` function to optimize often-used documents before rendering for
     efficiency.
  6. Instead of providing an own colorization function for each
     color/intensity/layer combination, they have been combined in 'color'
     'colorDull', 'bgColor', and 'bgColorDull' functions.
